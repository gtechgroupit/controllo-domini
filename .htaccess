# =====================================================
# .htaccess - Controllo Domini (VERSIONE MINIMA)
# =====================================================

# Abilita il motore di rewrite
RewriteEngine On

# Disabilita la visualizzazione degli indici delle directory
Options -Indexes

# MIME Types per CSS
<IfModule mod_mime.c>
    AddType text/css .css
    AddType application/javascript .js
</IfModule>

# Consenti accesso a tutti i file nelle cartelle pubbliche
<FilesMatch "\.(css|js|jpg|jpeg|png|gif|svg|webp|ico|woff|woff2|ttf|otf|pdf|xml|txt|webmanifest)$">
    Require all granted
</FilesMatch>

# Regole di base per sicurezza
<IfModule mod_rewrite.c>
    # Proteggi file sensibili
    RewriteRule ^(\.htaccess|\.htpasswd|\.env|composer\.json|composer\.lock)$ - [F,L]
    
    # Proteggi directory sensibili
    RewriteRule ^(config|includes|templates|vendor|node_modules|\.git)/ - [F,L]
    
    # Se il file o directory esiste, servilo direttamente
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    
    # Pretty URLs per file PHP
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}.php -f
    RewriteRule ^([^/]+)/?$ $1.php [L]
</IfModule>

# Error Documents
ErrorDocument 404 /404.php
ErrorDocument 403 /403.php
ErrorDocument 500 /500.php

# Charset
AddDefaultCharset UTF-8
